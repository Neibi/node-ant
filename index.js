// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a,f,l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e},h=function(e,t){return function(){return e.apply(t,arguments)}},p=this;t=function(){function e(){this.MESSAGE_SYSTEM_RESET=74;this.MESSAGE_CHANNEL_OPEN=75;this.MESSAGE_CHANNEL_CLOSE=76;this.MESSAGE_CHANNEL_REQUEST=77}return e}();e=function(e){function t(){t.__super__.constructor.call(this)}c(t,e);return t}(t);f=require("usb");r=require("events").EventEmitter;n=function(e){function t(){this.close=h(this.close,this);this.open=h(this.open,this);f.setDebugLevel(0);this.rawStart=["A4014A00EF","A4024D0054BF","A4094600B9A521FBBD72C34564","A40342000000E5","A4055100624D7901A7","A4024400FF1D","A4034300961F6D","A402450039DA","A4014B00EE"];this.rawStop=["A4014C00E9","A4014100E4","A4014A00EF"]}c(t,e);t.prototype.open=function(){return console.log("This driver does not the open command")};t.prototype.close=function(){return console.log("This driver does not the close command")};return t}(r);u=function(e){function t(e,n){this.idVendor=e;this.idProduct=n;this.writeCallback=h(this.writeCallback,this);this.write=h(this.write,this);this.close=h(this.close,this);this.open=h(this.open,this);t.__super__.constructor.call(this);this.device=null;this.iface=null;this.inEndpoint=null;this.outEndpoint=null}c(t,e);t.prototype.open=function(){var e=this;this.device=f.findByIds(this.idVendor,this.idProduct);this.device.open();this.iface=this.device.interfaces[0];this.iface.claim();this.inEndpoint=this.iface.endpoints[0];this.inEndpoint.startStream(1,128);this.inEndpoint.on("data",function(t){return e.emit("read",t)});this.inEndpoint.on("error",function(e){return console.log(e)});this.inEndpoint.on("end",function(){return console.log("*****STOP RECIEVING*****")});return this.outEndpoint=this.iface.endpoints[1]};t.prototype.close=function(){};t.prototype.write=function(e){this.outEndpoint.transfer(e,this.writeCallback);return console.log("WRITE:",e)};t.prototype.writeCallback=function(e){if(e)return console.log(e)};return t}(n);o=function(){function e(){this.stick=null}return e}();i=function(e){function t(){t.__super__.constructor.call(this,4047,4104)}c(t,e);return t}(u);s=function(e){function t(){t.__super__.constructor.call(this,4047,4105)}c(t,e);return t}(u);a=new e;a.stick=new s;a.stick.open();a.stick.on("read",function(e){return console.log(e)})}).call(this);